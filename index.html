<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä NaN Îç∞Ïù¥ÌÑ∞ ÎåÄÏãúÎ≥¥Îìú - GST Factory</title>
    
    <!-- CSS ÎùºÏù¥Î∏åÎü¨Î¶¨ -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Ïª§Ïä§ÌÖÄ CSS -->
    <link href="css/dashboard.css" rel="stylesheet">
</head>
<body>
    <!-- Ìó§Îçî -->
    <nav class="navbar navbar-dark bg-primary sticky-top">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">
                <i class="fas fa-chart-line me-2"></i>NaN Îç∞Ïù¥ÌÑ∞ ÎåÄÏãúÎ≥¥Îìú
            </span>
            <div class="navbar-text">
                <small id="lastUpdate">ÎßàÏßÄÎßâ ÏóÖÎç∞Ïù¥Ìä∏: Î°úÎî©Ï§ë...</small>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        <!-- Î°úÎî© Ïä§ÌîºÎÑà -->
        <div id="loadingSpinner" class="text-center my-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Îç∞Ïù¥ÌÑ∞ Î°úÎî©Ï§ë...</span>
            </div>
            <p class="mt-3">NaN Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ëÏûÖÎãàÎã§...</p>
        </div>

        <!-- ÎåÄÏãúÎ≥¥Îìú Î©îÏù∏ Ïª®ÌÖêÏ∏† -->
        <div id="dashboardContent" style="display: none;">
            
            <!-- ÏöîÏïΩ Ïπ¥Îìú -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card bg-info text-white">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <h6 class="card-title mb-0">Î∂ÑÏÑù Í∏∞Í∞Ñ</h6>
                                    <h4 class="mb-0" id="analysisPeriod">-</h4>
                                </div>
                                <i class="fas fa-calendar-alt fa-2x opacity-75"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-success text-white">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <h6 class="card-title mb-0">Ï†ÑÏ≤¥ NaN Î∞úÏÉùÎ•†</h6>
                                    <h4 class="mb-0" id="overallNanRate">-</h4>
                                </div>
                                <i class="fas fa-chart-line fa-2x opacity-75"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-warning text-white">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <h6 class="card-title mb-0">Í∞úÏÑ† ÌïÑÏöî ÌòëÎ†•ÏÇ¨</h6>
                                    <h4 class="mb-0" id="highNanPartners">-</h4>
                                </div>
                                <i class="fas fa-exclamation-triangle fa-2x opacity-75"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-danger text-white">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <h6 class="card-title mb-0">ÌòëÎ†•ÏÇ¨ Ïàò</h6>
                                    <h4 class="mb-0" id="totalPartners">-</h4>
                                </div>
                                <i class="fas fa-building fa-2x opacity-75"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÏõîÎ≥Ñ ÏÑ†ÌÉùÍ∏∞ Î∞è Îç∞Ïù¥ÌÑ∞ ÏÜåÏä§ Ï†ïÎ≥¥ -->
            <div class="row mb-4">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">
                                <i class="fas fa-calendar-alt me-2"></i>Î∂ÑÏÑù Í∏∞Í∞Ñ ÏÑ†ÌÉù
                            </h6>
                            <select class="form-select" id="monthSelector">
                                <option value="2025-08">2025ÎÖÑ 8Ïõî</option>
                                <option value="2025-07">2025ÎÖÑ 7Ïõî</option>
                                <option value="2025-06">2025ÎÖÑ 6Ïõî</option>
                                <option value="all">Ï†ÑÏ≤¥ Í∏∞Í∞Ñ (6Ïõî~8Ïõî)</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="alert alert-info mb-0">
                        <h6 class="alert-heading">
                            <i class="fas fa-info-circle me-2"></i>Îç∞Ïù¥ÌÑ∞ ÏÜåÏä§ Ï†ïÎ≥¥
                        </h6>
                        <p class="mb-0">
                            <strong>üìÖ Ï£ºÏ∞®Î≥Ñ Îç∞Ïù¥ÌÑ∞ ÏÑ†ÌÉù Î°úÏßÅ:</strong> 
                            32Ï£ºÏ∞® <strong>Ìè¨Ìï®</strong> Ïù¥Ï†Ñ <span class="badge bg-secondary">Í∏àÏöîÏùº</span>, 
                            33Ï£ºÏ∞®Î∂ÄÌÑ∞ <span class="badge bg-primary">ÏùºÏöîÏùº</span> Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö©
                        </p>
                    </div>
                </div>
            </div>

            <!-- Ï∞®Ìä∏ ÏòÅÏó≠ -->
            <div class="row mb-4">
                <!-- Ï£ºÏ∞®Î≥Ñ NaN Ï∂îÏù¥ -->
                <div class="col-lg-8">
                    <div class="card h-100">
                        <div class="card-header bg-light">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-chart-line me-2"></i>Ï£ºÏ∞®Î≥Ñ NaN ÎπÑÏú® Ï∂îÏù¥
                            </h5>
                        </div>
                        <div class="card-body">
                            <canvas id="weeklyTrendChart" height="300"></canvas>
                        </div>
                    </div>
                </div>

                <!-- ÌòëÎ†•ÏÇ¨Î≥Ñ ÌòÑÌô© -->
                <div class="col-lg-4">
                    <div class="card h-100">
                        <div class="card-header bg-light">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-building me-2"></i>ÌòëÎ†•ÏÇ¨Î≥Ñ ÌòÑÌô©
                            </h5>
                        </div>
                        <div class="card-body">
                            <canvas id="partnerComparisonChart" height="300"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ï£ºÏ∞®Î≥Ñ ÏÉÅÏÑ∏ ÌÖåÏù¥Î∏î -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-light d-flex justify-content-between align-items-center">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-table me-2"></i>Ï£ºÏ∞®Î≥Ñ ÏÉÅÏÑ∏ ÌòÑÌô©
                            </h5>
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-outline-primary btn-sm" id="showMechBtn">
                                    üîß Í∏∞Íµ¨ ÌòëÎ†•ÏÇ¨
                                </button>
                                <button type="button" class="btn btn-outline-primary btn-sm" id="showElecBtn">
                                    ‚ö° Ï†ÑÏû• ÌòëÎ†•ÏÇ¨
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover" id="weeklyDetailTable">
                                    <thead class="table-dark">
                                        <tr id="tableHeader">
                                            <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ± -->
                                        </tr>
                                    </thead>
                                    <tbody id="tableBody">
                                        <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ± -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÏÉÅÏÑ∏ ÎàÑÎùΩ Ìï≠Î™© -->
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-light">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-exclamation-triangle me-2"></i>Ï£ºÏ∞®Î≥Ñ NaN ÏÉÅÏÑ∏ ÎÇ¥Ïó≠
                            </h5>
                        </div>
                        <div class="card-body">
                            <div id="nanDetailsAccordion" class="accordion">
                                <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ± -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ïä§ÌÅ¨Î¶ΩÌä∏ -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Î™®Îì† ÏõîÎ≥Ñ NaN Îç∞Ïù¥ÌÑ∞ (CORS Î¨∏Ï†ú Ìï¥Í≤∞) -->
    <script>
// Î™®Îì† ÏõîÎ≥Ñ NaN Îç∞Ïù¥ÌÑ∞ (CORS Î¨∏Ï†ú Ìï¥Í≤∞)
window.ALL_MONTHLY_DATA = {
  "2025-06": {
    "extracted_at": "2025-08-21T15:56:58.808669",
    "period": "2025-06",
    "total_records": 153,
    "weekly_stats": {
      "26Ï£ºÏ∞®": {
        "week_number": 26,
        "date": "2025-06-27",
        "weekday": "Friday",
        "is_sunday_data": false,
        "data_source": "Í∏àÏöîÏùº",
        "total_records": 55,
        "partners": {
          "mech": {
            "BAT": {
              "total_tasks": 774,
              "nan_count": 4,
              "nan_ratio": 0.516795865633075,
              "records": [
                {
                  "order_no": "250522/5692/5657",
                  "model_name": "GAIA-I DUAL",
                  "nan_count": 2,
                  "total_tasks": 40,
                  "nan_ratio": 5.263157894736842
                }
              ]
            },
            "FNI": {
              "total_tasks": 559,
              "nan_count": 0,
              "nan_ratio": 0.0,
              "records": []
            },
            "TMS": {
              "total_tasks": 79,
              "nan_count": 0,
              "nan_ratio": 0.0,
              "records": []
            }
          },
          "elec": {
            "TMS": {
              "total_tasks": 763,
              "nan_count": 0,
              "nan_ratio": 0.0,
              "records": []
            },
            "P&S": {
              "total_tasks": 318,
              "nan_count": 0,
              "nan_ratio": 0.0,
              "records": []
            },
            "C&A": {
              "total_tasks": 331,
              "nan_count": 0,
              "nan_ratio": 0.0,
              "records": []
            }
          }
        }
      }
    },
    "partner_summary": {
      "BAT": {
        "total_tasks": 1549,
        "nan_count": 13,
        "weeks": {
          "26Ï£ºÏ∞®": { "nan_count": 4, "total_tasks": 774 }
        },
        "nan_ratio": 0.8392511297611362
      },
      "FNI": {
        "total_tasks": 2003,
        "nan_count": 0,
        "weeks": {
          "26Ï£ºÏ∞®": { "nan_count": 0, "total_tasks": 559 }
        },
        "nan_ratio": 0.0
      },
      "TMS": {
        "total_tasks": 2193,
        "nan_count": 0,
        "weeks": {
          "26Ï£ºÏ∞®": { "nan_count": 0, "total_tasks": 763 }
        },
        "nan_ratio": 0.0
      }
    },
    "metadata": {
      "data_source_logic": "32Ï£ºÏ∞® Ìè¨Ìï® Ïù¥Ï†Ñ: Í∏àÏöîÏùº, 33Ï£ºÏ∞®Î∂ÄÌÑ∞: ÏùºÏöîÏùº",
      "weeks_analyzed": ["26Ï£ºÏ∞®"],
      "week_32_boundary": "2025-08-17"
    }
  },
  "2025-07": {
    "extracted_at": "2025-08-21T15:57:27.474421",
    "period": "2025-07",
    "total_records": 126,
    "weekly_stats": {
      "30Ï£ºÏ∞®": {
        "week_number": 30,
        "date": "2025-07-25",
        "weekday": "Friday",
        "is_sunday_data": false,
        "data_source": "Í∏àÏöîÏùº",
        "total_records": 36,
        "partners": {
          "mech": {
            "BAT": {
              "total_tasks": 559,
              "nan_count": 7,
              "nan_ratio": 1.2522361359017857,
              "records": [
                {
                  "order_no": "250704/5754/5803",
                  "model_name": "GAIA-I",
                  "nan_count": 7,
                  "total_tasks": 38,
                  "nan_ratio": 20.0
                }
              ]
            }
          }
        }
      }
    },
    "partner_summary": {
      "BAT": {
        "total_tasks": 1300,
        "nan_count": 15,
        "nan_ratio": 1.1538461538461537
      }
    }
  }
};
    </script>
    
    <!-- Í∏∞Î≥∏ 8Ïõî NaN Îç∞Ïù¥ÌÑ∞ (Ìò∏ÌôòÏÑ±) -->
    <script>
        window.NAN_DATA = {
  "extracted_at": "2025-08-21T15:43:38.245913",
  "period": "2025-08",
  "total_records": 98,
  "weekly_stats": {
    "33Ï£ºÏ∞®": {
      "week_number": 33,
      "date": "2025-08-17",
      "weekday": "Sunday",
      "is_sunday_data": true,
      "total_records": 27,
      "partners": {
        "mech": {
          "TMS": {
            "total_tasks": 100,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          },
          "BAT": {
            "total_tasks": 155,
            "nan_count": 2,
            "nan_ratio": 1.2903225806451613,
            "records": [
              {
                "order_no": "250731/5890/0118",
                "model_name": "SWS-I",
                "nan_count": 2,
                "total_tasks": 37,
                "nan_ratio": 6.25
              }
            ]
          },
          "FNI": {
            "total_tasks": 741,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          }
        },
        "elec": {
          "TMS": {
            "total_tasks": 698,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          },
          "C&A": {
            "total_tasks": 220,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          },
          "P&S": {
            "total_tasks": 78,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          }
        }
      }
    },
    "32Ï£ºÏ∞®": {
      "week_number": 32,
      "date": "2025-08-08",
      "weekday": "Friday",
      "is_sunday_data": false,
      "total_records": 34,
      "partners": {
        "mech": {
          "BAT": {
            "total_tasks": 831,
            "nan_count": 5,
            "nan_ratio": 0.601684717208183,
            "records": [
              {
                "order_no": "250725/5886/5916",
                "model_name": "GAIA-II",
                "nan_count": 5,
                "total_tasks": 37,
                "nan_ratio": 15.789473684210526
              }
            ]
          },
          "FNI": {
            "total_tasks": 434,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          },
          "TMS": {
            "total_tasks": 34,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          }
        },
        "elec": {
          "P&S": {
            "total_tasks": 419,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          },
          "TMS": {
            "total_tasks": 595,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          },
          "C&A": {
            "total_tasks": 285,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          }
        }
      }
    },
    "31Ï£ºÏ∞®": {
      "week_number": 31,
      "date": "2025-08-01",
      "weekday": "Friday",
      "is_sunday_data": false,
      "total_records": 37,
      "partners": {
        "mech": {
          "FNI": {
            "total_tasks": 828,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          },
          "BAT": {
            "total_tasks": 563,
            "nan_count": 6,
            "nan_ratio": 1.0657193605683837,
            "records": [
              {
                "order_no": "250714/5810/5864",
                "model_name": "GAIA-II",
                "nan_count": 1,
                "total_tasks": 39,
                "nan_ratio": 4.761904761904762
              },
              {
                "order_no": "250714/5810/5865",
                "model_name": "GAIA-II",
                "nan_count": 1,
                "total_tasks": 40,
                "nan_ratio": 4.761904761904762
              },
              {
                "order_no": "250714/5810/5866",
                "model_name": "GAIA-II",
                "nan_count": 1,
                "total_tasks": 40,
                "nan_ratio": 4.545454545454546
              },
              {
                "order_no": "250714/5810/5867",
                "model_name": "GAIA-II",
                "nan_count": 1,
                "total_tasks": 40,
                "nan_ratio": 4.761904761904762
              },
              {
                "order_no": "250716/5795/5870",
                "model_name": "GAIA-I",
                "nan_count": 1,
                "total_tasks": 38,
                "nan_ratio": 5.263157894736842
              },
              {
                "order_no": "250716/5861/5876",
                "model_name": "GAIA-I",
                "nan_count": 1,
                "total_tasks": 38,
                "nan_ratio": 5.263157894736842
              }
            ]
          },
          "TMS": {
            "total_tasks": 63,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          }
        },
        "elec": {
          "TMS": {
            "total_tasks": 703,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          },
          "P&S": {
            "total_tasks": 152,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          },
          "C&A": {
            "total_tasks": 599,
            "nan_count": 0,
            "nan_ratio": 0.0,
            "records": []
          }
        }
      }
    }
  },
  "partner_summary": {
    "TMS": {
      "total_tasks": 2193,
      "nan_count": 0,
      "weeks": {
        "33Ï£ºÏ∞®": {
          "nan_count": 0,
          "total_tasks": 698
        },
        "32Ï£ºÏ∞®": {
          "nan_count": 0,
          "total_tasks": 595
        },
        "31Ï£ºÏ∞®": {
          "nan_count": 0,
          "total_tasks": 703
        }
      },
      "nan_ratio": 0.0
    },
    "BAT": {
      "total_tasks": 1549,
      "nan_count": 13,
      "weeks": {
        "33Ï£ºÏ∞®": {
          "nan_count": 2,
          "total_tasks": 155
        },
        "32Ï£ºÏ∞®": {
          "nan_count": 5,
          "total_tasks": 831
        },
        "31Ï£ºÏ∞®": {
          "nan_count": 6,
          "total_tasks": 563
        }
      },
      "nan_ratio": 0.8392511297611362
    },
    "FNI": {
      "total_tasks": 2003,
      "nan_count": 0,
      "weeks": {
        "33Ï£ºÏ∞®": {
          "nan_count": 0,
          "total_tasks": 741
        },
        "32Ï£ºÏ∞®": {
          "nan_count": 0,
          "total_tasks": 434
        },
        "31Ï£ºÏ∞®": {
          "nan_count": 0,
          "total_tasks": 828
        }
      },
      "nan_ratio": 0.0
    },
    "C&A": {
      "total_tasks": 1104,
      "nan_count": 0,
      "weeks": {
        "33Ï£ºÏ∞®": {
          "nan_count": 0,
          "total_tasks": 220
        },
        "32Ï£ºÏ∞®": {
          "nan_count": 0,
          "total_tasks": 285
        },
        "31Ï£ºÏ∞®": {
          "nan_count": 0,
          "total_tasks": 599
        }
      },
      "nan_ratio": 0.0
    },
    "P&S": {
      "total_tasks": 649,
      "nan_count": 0,
      "weeks": {
        "33Ï£ºÏ∞®": {
          "nan_count": 0,
          "total_tasks": 78
        },
        "32Ï£ºÏ∞®": {
          "nan_count": 0,
          "total_tasks": 419
        },
        "31Ï£ºÏ∞®": {
          "nan_count": 0,
          "total_tasks": 152
        }
      },
      "nan_ratio": 0.0
    }
  },
  "metadata": {
    "data_source_logic": "33Ï£ºÏ∞®Î∂ÄÌÑ∞ ÏùºÏöîÏùº, 32Ï£ºÏ∞® Ïù¥Ìïò Í∏àÏöîÏùº",
    "weeks_analyzed": [
      "33Ï£ºÏ∞®",
      "32Ï£ºÏ∞®",
      "31Ï£ºÏ∞®"
    ]
  }
};
    </script>
    
    <script src="js/dashboard.js"></script>
</body>
</html>
